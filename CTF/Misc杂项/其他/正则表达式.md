# æ­£åˆ™è¡¨è¾¾å¼è¯¦ç»†è®²è§£

## ä¸€ã€æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€æ¦‚å¿µ

### 1.1 ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼
æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular Expressionï¼Œç®€ç§° RegExï¼‰æ˜¯ä¸€ç§ç”¨äºåŒ¹é…å­—ç¬¦ä¸²æ¨¡å¼çš„å¼ºå¤§å·¥å…·ã€‚å®ƒä½¿ç”¨ç‰¹æ®Šçš„è¯­æ³•æ¥æè¿°å­—ç¬¦ä¸²çš„åŒ¹é…è§„åˆ™ã€‚

### 1.2 åŸºæœ¬ç»„æˆ
```javascript
// æ­£åˆ™è¡¨è¾¾å¼çš„ä¸¤ç§åˆ›å»ºæ–¹å¼
const regex1 = /pattern/flags;        // å­—é¢é‡æ–¹å¼
const regex2 = new RegExp('pattern', 'flags'); // æ„é€ å‡½æ•°æ–¹å¼
```

## äºŒã€å…ƒå­—ç¬¦è¯¦è§£

### 2.1 åŸºç¡€å…ƒå­—ç¬¦

| å…ƒå­—ç¬¦  | æè¿°                       | ç¤ºä¾‹                              |
| ---- | ------------------------ | ------------------------------- |
| `.`  | åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–çš„ä»»æ„å­—ç¬¦             | `/a.c/` åŒ¹é… "abc", "a1c"         |
| `\d` | åŒ¹é…æ•°å­— [0-9]               | `/\d+/` åŒ¹é… "123"                |
| `\D` | åŒ¹é…éæ•°å­— [^0-9]             | `/\D+/` åŒ¹é… "abc"                |
| `\w` | åŒ¹é…å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ [a-zA-Z0-9_] | `/\w+/` åŒ¹é… "hello_123"          |
| `\W` | åŒ¹é…éå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿             | `/\W+/` åŒ¹é… "!@#"                |
| `\s` | åŒ¹é…ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ï¼‰       | `/\s+/` åŒ¹é…ç©ºæ ¼                    |
| `\S` | åŒ¹é…éç©ºç™½å­—ç¬¦                  | `/\S+/` åŒ¹é…éç©ºç™½                   |
| `\b` | åŒ¹é…å•è¯è¾¹ç•Œ                   | `/\bword\b/` åŒ¹é…ç‹¬ç«‹çš„ "word"       |
| `\B` | åŒ¹é…éå•è¯è¾¹ç•Œ                  | `/\Bword/` åŒ¹é… "sword" ä¸­çš„ "word" |

### 2.2 å®ä¾‹æ¼”ç¤º
```javascript
// å…ƒå­—ç¬¦ä½¿ç”¨ç¤ºä¾‹
const text = "Hello 123 World!";

// åŒ¹é…æ•°å­—
console.log(text.match(/\d+/g));      // ["123"]

// åŒ¹é…å•è¯
console.log(text.match(/\w+/g));      // ["Hello", "123", "World"]

// åŒ¹é…ç©ºç™½å­—ç¬¦
console.log(text.match(/\s/g));       // [" ", " "]

// å•è¯è¾¹ç•Œ
console.log("cat catfish".match(/\bcat\b/g)); // ["cat"] ä¸åŒ…å« catfish ä¸­çš„ cat
```

## ä¸‰ã€é‡è¯

### 3.1 åŸºæœ¬é‡è¯

| é‡è¯      | æè¿°          | ç¤ºä¾‹                                |
| ------- | ----------- | --------------------------------- |
| `*`     | åŒ¹é… 0 æ¬¡æˆ–å¤šæ¬¡   | `/ab*/` åŒ¹é… "a", "ab", "abbb"      |
| `+`     | åŒ¹é… 1 æ¬¡æˆ–å¤šæ¬¡   | `/ab+/` åŒ¹é… "ab", "abbb"ï¼Œä¸åŒ¹é… "a"   |
| `?`     | åŒ¹é… 0 æ¬¡æˆ– 1 æ¬¡ | `/ab?/` åŒ¹é… "a", "ab"              |
| `{n}`   | ç²¾ç¡®åŒ¹é… n æ¬¡    | `/a{3}/` åŒ¹é… "aaa"                 |
| `{n,}`  | åŒ¹é…è‡³å°‘ n æ¬¡    | `/a{2,}/` åŒ¹é… "aa", "aaa", "aaaa"  |
| `{n,m}` | åŒ¹é… n åˆ° m æ¬¡  | `/a{2,4}/` åŒ¹é… "aa", "aaa", "aaaa" |

### 3.2 è´ªå©ªä¸éè´ªå©ª
```javascript
// è´ªå©ªåŒ¹é…ï¼ˆé»˜è®¤ï¼‰- å°½å¯èƒ½å¤šåœ°åŒ¹é…
const greedyRegex = /a+/;
console.log("aaaa".match(greedyRegex));  // ["aaaa"]

// éè´ªå©ªåŒ¹é… - åœ¨é‡è¯ååŠ  ? å®ç°æœ€å°åŒ¹é…
const lazyRegex = /a+?/;
console.log("aaaa".match(lazyRegex));    // ["a"]

// å®é™…åº”ç”¨ç¤ºä¾‹
const html = '<div>content1</div><div>content2</div>';
console.log(html.match(/<div>.*<\/div>/));   // è´ªå©ªï¼šåŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²
console.log(html.match(/<div>.*?<\/div>/));  // éè´ªå©ªï¼šåŒ¹é…ç¬¬ä¸€ä¸ªdiv
```

## å››ã€å­—ç¬¦ç±»å’ŒèŒƒå›´

### 4.1 å­—ç¬¦ç±»
```javascript
// æ–¹æ‹¬å· [] å®šä¹‰å­—ç¬¦ç±»
const regex1 = /[abc]/;    // åŒ¹é… a æˆ– b æˆ– c
const regex2 = /[^abc]/;   // åŒ¹é…é™¤ aã€bã€c å¤–çš„ä»»æ„å­—ç¬¦

// èŒƒå›´è¡¨ç¤º
const regex3 = /[a-z]/;    // åŒ¹é…å°å†™å­—æ¯
const regex4 = /[A-Z]/;    // åŒ¹é…å¤§å†™å­—æ¯
const regex5 = /[0-9]/;    // åŒ¹é…æ•°å­—
const regex6 = /[a-zA-Z0-9]/; // åŒ¹é…å­—æ¯å’Œæ•°å­—

// ç»„åˆä½¿ç”¨
const passwordRegex = /^[a-zA-Z0-9!@#$%]{8,20}$/;
console.log(passwordRegex.test("Pass123!")); // true
```

## äº”ã€åˆ†ç»„å’Œæ•è·

### 5.1 åŸºæœ¬åˆ†ç»„
```javascript
// ä½¿ç”¨æ‹¬å· () è¿›è¡Œåˆ†ç»„
const regex = /(ab)+/;  // å°† ab ä½œä¸ºä¸€ä¸ªæ•´ä½“åŒ¹é…ä¸€æ¬¡æˆ–å¤šæ¬¡
console.log("ababab".match(regex));  // ["ababab", "ab"]

// æ•è·ç»„ - å¯ä»¥è·å–åŒ¹é…çš„å­ä¸²
const dateRegex = /(\d{4})-(\d{2})-(\d{2})/;
const result = "2024-01-15".match(dateRegex);
console.log(result[0]);  // "2024-01-15" (å®Œæ•´åŒ¹é…)
console.log(result[1]);  // "2024" (ç¬¬ä¸€ä¸ªåˆ†ç»„)
console.log(result[2]);  // "01" (ç¬¬äºŒä¸ªåˆ†ç»„)
console.log(result[3]);  // "15" (ç¬¬ä¸‰ä¸ªåˆ†ç»„)
```

### 5.2 å‘½ååˆ†ç»„
```javascript
// ES2018 æ–°å¢å‘½ååˆ†ç»„ (?<name>...)
const namedRegex = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
const match = "2024-01-15".match(namedRegex);
console.log(match.groups.year);   // "2024"
console.log(match.groups.month);  // "01"
console.log(match.groups.day);    // "15"
```

### 5.3 éæ•è·ç»„
```javascript
// éæ•è·ç»„ (?:...) - åˆ†ç»„ä½†ä¸æ•è·
const regex = /(?:ab)+/;
console.log("ababab".match(regex));  // ["ababab"] æ²¡æœ‰æ•è·ç»„

// åº”ç”¨åœºæ™¯ï¼šåªéœ€è¦åˆ†ç»„åŠŸèƒ½ï¼Œä¸éœ€è¦æ•è·ç»“æœ
const urlRegex = /https?:\/\/(?:www\.)?([a-z]+\.com)/;
const url = "https://www.example.com";
console.log(url.match(urlRegex)[1]); // "example.com"
```

## å…­ã€ä½ç½®é”šç‚¹

### 6.1 è¡Œé¦–è¡Œå°¾
```javascript
// ^ åŒ¹é…è¡Œé¦–ï¼Œ$ åŒ¹é…è¡Œå°¾
const startRegex = /^Hello/;
console.log(startRegex.test("Hello World"));  // true
console.log(startRegex.test("Say Hello"));    // false

const endRegex = /World$/;
console.log(endRegex.test("Hello World"));    // true
console.log(endRegex.test("World Hello"));    // false

// å®Œå…¨åŒ¹é…
const exactRegex = /^Hello World$/;
console.log(exactRegex.test("Hello World"));  // true
console.log(exactRegex.test(" Hello World ")); // false
```

## ä¸ƒã€æ–­è¨€

### 7.1 æ­£å‘å…ˆè¡Œæ–­è¨€
```javascript
// (?=...) æ­£å‘å…ˆè¡Œæ–­è¨€ - åŒ¹é…åé¢è·Ÿç€æŒ‡å®šå†…å®¹çš„ä½ç½®
const regex = /\d+(?=px)/;
console.log("100px 200em".match(regex));  // ["100"]

// å¯†ç å¼ºåº¦éªŒè¯ï¼šå¿…é¡»åŒ…å«å¤§å†™å­—æ¯ã€å°å†™å­—æ¯å’Œæ•°å­—
const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;
console.log(passwordRegex.test("Pass123word")); // true
```

### 7.2 è´Ÿå‘å…ˆè¡Œæ–­è¨€
```javascript
// (?!...) è´Ÿå‘å…ˆè¡Œæ–­è¨€ - åŒ¹é…åé¢ä¸è·Ÿç€æŒ‡å®šå†…å®¹çš„ä½ç½®
const regex = /\d+(?!px)/;
console.log("100px 200em".match(regex));  // ["20"]
```

### 7.3 åè¡Œæ–­è¨€ï¼ˆES2018ï¼‰
```javascript
// (?<=...) æ­£å‘åè¡Œæ–­è¨€
const regex = /(?<=\$)\d+/;
console.log("$100 200".match(regex));  // ["100"]

// (?<!...) è´Ÿå‘åè¡Œæ–­è¨€
const regex2 = /(?<!\$)\d+/;
console.log("$100 200".match(regex2)); // ["00"]ï¼ˆä»100çš„ç¬¬äºŒä¸ª0å¼€å§‹ï¼‰
```

## å…«ã€æ ‡å¿—ï¼ˆFlagsï¼‰

### 8.1 å¸¸ç”¨æ ‡å¿—
```javascript
// g - å…¨å±€åŒ¹é…
const globalRegex = /a/g;
console.log("banana".match(globalRegex));  // ["a", "a", "a"]

// i - å¿½ç•¥å¤§å°å†™
const ignoreCase = /hello/i;
console.log(ignoreCase.test("HELLO"));     // true

// m - å¤šè¡Œæ¨¡å¼
const multiline = /^start/gm;
const text = "start line1\nstart line2";
console.log(text.match(multiline));        // ["start", "start"]

// s - dotAllæ¨¡å¼ï¼ˆES2018ï¼‰
const dotAll = /hello.world/s;
console.log(dotAll.test("hello\nworld"));  // true

// u - Unicodeæ¨¡å¼
const unicode = /\u{1F600}/u;
console.log(unicode.test("ğŸ˜€"));           // true

// y - ç²˜æ€§æ¨¡å¼
const sticky = /\d+/y;
sticky.lastIndex = 2;
console.log("--123--".match(sticky));      // ["123"]
```

## ä¹ã€å®æˆ˜ç¤ºä¾‹

### 9.1 é‚®ç®±éªŒè¯
```javascript
const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

// æµ‹è¯•
console.log(emailRegex.test("user@example.com"));      // true
console.log(emailRegex.test("user.name@example.co.uk")); // true
console.log(emailRegex.test("invalid.email"));         // false
```

### 9.2 æ‰‹æœºå·éªŒè¯ï¼ˆä¸­å›½ï¼‰
```javascript
const phoneRegex = /^1[3-9]\d{9}$/;

// æµ‹è¯•
console.log(phoneRegex.test("13812345678"));  // true
console.log(phoneRegex.test("12812345678"));  // false
console.log(phoneRegex.test("138123456"));    // false
```

### 9.3 URLè§£æ
```javascript
const urlRegex = /^(https?):\/\/([^/:]+)(:\d+)?(\/[^?#]*)?(\?[^#]*)?(#.*)?$/;

const url = "https://www.example.com:8080/path/to/page?query=123#section";
const match = url.match(urlRegex);

console.log({
    protocol: match[1],  // "https"
    host: match[2],      // "www.example.com"
    port: match[3],      // ":8080"
    path: match[4],      // "/path/to/page"
    query: match[5],     // "?query=123"
    hash: match[6]       // "#section"
});
```

### 9.4 æå–HTMLæ ‡ç­¾å†…å®¹
```javascript
const html = '<div class="container">Hello World</div>';
const tagRegex = /<(\w+)([^>]*)>(.*?)<\/\1>/;

const result = html.match(tagRegex);
console.log({
    fullMatch: result[0],   // å®Œæ•´åŒ¹é…
    tagName: result[1],     // "div"
    attributes: result[2],  // ' class="container"'
    content: result[3]      // "Hello World"
});
```

### 9.5 åƒåˆ†ä½æ ¼å¼åŒ–
```javascript
function addCommas(num) {
    return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

console.log(addCommas(1234567));    // "1,234,567"
console.log(addCommas(123456.789)); // "123,456.789"
```

## åã€æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 10.1 ä¼˜åŒ–æŠ€å·§
```javascript
// 1. ä½¿ç”¨éæ•è·ç»„
const bad = /(https?):\/\/(www\.)?/;
const good = /(?:https?):\/\/(?:www\.)?/;

// 2. ä½¿ç”¨å…·ä½“å­—ç¬¦ç±»è€Œä¸æ˜¯é€šé…ç¬¦
const bad2 = /.+@.+\..+/;
const good2 = /[^@]+@[^@]+\.[^@]+/;

// 3. åˆç†ä½¿ç”¨é”šç‚¹
const bad3 = /admin/;
const good3 = /^admin$/;

// 4. é¿å…å›æº¯ç¾éš¾
const bad4 = /(x+x+)+y/;  // å¯èƒ½å¯¼è‡´æŒ‡æ•°çº§å›æº¯
const good4 = /xx+y/;      // ç®€åŒ–è¡¨è¾¾å¼
```

