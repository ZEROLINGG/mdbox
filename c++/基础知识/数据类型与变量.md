# C++ æ•°æ®ç±»å‹å®Œå…¨æŒ‡å—

## ä¸€ã€åŸºæœ¬å†…ç½®æ•°æ®ç±»å‹

### 1. æ•´å‹ï¼ˆInteger Typesï¼‰

```cpp
#include <iostream>
#include <climits>
using namespace std;

int main() {
    // åŸºæœ¬æ•´å‹
    int a = 42;                  // é€šå¸¸ä¸º4å­—èŠ‚ï¼ŒèŒƒå›´ï¼š-2^31 åˆ° 2^31-1
    short b = 100;               // é€šå¸¸ä¸º2å­—èŠ‚ï¼ŒèŒƒå›´ï¼š-32768 åˆ° 32767
    long c = 100000L;            // è‡³å°‘4å­—èŠ‚
    long long d = 10000000000LL; // è‡³å°‘8å­—èŠ‚ï¼ˆC++11ï¼‰
    
    // æ— ç¬¦å·æ•´å‹
    unsigned int ua = 42U;
    unsigned short ub = 100;
    unsigned long uc = 100000UL;
    unsigned long long ud = 10000000000ULL;
    
    // æŸ¥çœ‹ç±»å‹å¤§å°å’ŒèŒƒå›´
    cout << "int: " << sizeof(int) << " bytes" << endl;
    cout << "int range: " << INT_MIN << " to " << INT_MAX << endl;
    cout << "long long: " << sizeof(long long) << " bytes" << endl;
    cout << "long long range: " << LLONG_MIN << " to " << LLONG_MAX << endl;
    
    return 0;
}
```

### 2. å­—ç¬¦å‹ï¼ˆCharacter Typesï¼‰

```cpp
#include <iostream>
using namespace std;

int main() {
    // åŸºæœ¬å­—ç¬¦ç±»å‹
    char ch1 = 'A';              // 1å­—èŠ‚ï¼ŒASCIIå­—ç¬¦
    char ch2 = 65;               // å¯ä»¥ç”¨æ•°å­—è¡¨ç¤º
    signed char sch = -100;      // æ˜ç¡®æŒ‡å®šæœ‰ç¬¦å·
    unsigned char uch = 200;     // æ˜ç¡®æŒ‡å®šæ— ç¬¦å·
    
    // å®½å­—ç¬¦ç±»å‹
    wchar_t wch = L'ä¸­';         // å®½å­—ç¬¦ï¼Œé€šå¸¸2æˆ–4å­—èŠ‚
    char16_t ch16 = u'A';        // 16ä½Unicodeå­—ç¬¦ï¼ˆC++11ï¼‰
    char32_t ch32 = U'ğŸ˜€';       // 32ä½Unicodeå­—ç¬¦ï¼ˆC++11ï¼‰
    char8_t ch8 = u8'A';         // UTF-8å­—ç¬¦ï¼ˆC++20ï¼‰
    
    // å­—ç¬¦ä¸²å­—é¢é‡
    const char* str1 = "Hello";           // Cé£æ ¼å­—ç¬¦ä¸²
    const wchar_t* str2 = L"ä½ å¥½";        // å®½å­—ç¬¦ä¸²
    const char16_t* str3 = u"Hello";      // UTF-16å­—ç¬¦ä¸²
    const char32_t* str4 = U"Hello";      // UTF-32å­—ç¬¦ä¸²
    const char8_t* str5 = u8"Hello";      // UTF-8å­—ç¬¦ä¸²ï¼ˆC++20ï¼‰
    
    cout << "char size: " << sizeof(char) << " byte" << endl;
    cout << "wchar_t size: " << sizeof(wchar_t) << " bytes" << endl;
    
    return 0;
}
```

### 3. æµ®ç‚¹å‹ï¼ˆFloating-Point Typesï¼‰

```cpp
#include <iostream>
#include <iomanip>
#include <cfloat>
using namespace std;

int main() {
    // æµ®ç‚¹ç±»å‹
    float f = 3.14159f;           // å•ç²¾åº¦ï¼Œé€šå¸¸4å­—èŠ‚ï¼Œ6-7ä½æœ‰æ•ˆæ•°å­—
    double d = 3.141592653589793; // åŒç²¾åº¦ï¼Œé€šå¸¸8å­—èŠ‚ï¼Œ15-16ä½æœ‰æ•ˆæ•°å­—
    long double ld = 3.141592653589793238L; // æ‰©å±•ç²¾åº¦ï¼Œé€šå¸¸8-16å­—èŠ‚
    
    // ç§‘å­¦è®¡æ•°æ³•
    float scientific = 1.23e-4f;  // 0.000123
    double bigNum = 1.5e308;      // éå¸¸å¤§çš„æ•°
    
    // ç‰¹æ®Šå€¼
    float inf = 1.0f / 0.0f;      // æ­£æ— ç©·
    float negInf = -1.0f / 0.0f;  // è´Ÿæ— ç©·
    float nan = 0.0f / 0.0f;      // NaN (Not a Number)
    
    // ç²¾åº¦å±•ç¤º
    cout << fixed << setprecision(20);
    cout << "float: " << f << endl;
    cout << "double: " << d << endl;
    cout << "long double: " << ld << endl;
    
    // èŒƒå›´å±•ç¤º
    cout << "float range: " << FLT_MIN << " to " << FLT_MAX << endl;
    cout << "double range: " << DBL_MIN << " to " << DBL_MAX << endl;
    
    return 0;
}
```

### 4. å¸ƒå°”å‹ï¼ˆBoolean Typeï¼‰

```cpp
#include <iostream>
using namespace std;

int main() {
    bool flag1 = true;   // true = 1
    bool flag2 = false;  // false = 0
    bool flag3 = 100;    // éé›¶å€¼è½¬æ¢ä¸ºtrue
    bool flag4 = 0;      // 0è½¬æ¢ä¸ºfalse
    
    cout << "bool size: " << sizeof(bool) << " byte" << endl;
    cout << "true value: " << true << endl;   // è¾“å‡º1
    cout << "false value: " << false << endl; // è¾“å‡º0
    cout << boolalpha;  // è®¾ç½®è¾“å‡ºä¸ºtrue/false
    cout << "true: " << true << ", false: " << false << endl;
    
    return 0;
}
```

### 5. ç©ºç±»å‹ï¼ˆVoid Typeï¼‰

```cpp
void function() {
    // voidå‡½æ•°ä¸è¿”å›å€¼
}

void* genericPointer;  // voidæŒ‡é’ˆå¯ä»¥æŒ‡å‘ä»»ä½•ç±»å‹
int x = 10;
genericPointer = &x;   // ä½†éœ€è¦ç±»å‹è½¬æ¢æ‰èƒ½ä½¿ç”¨
int* intPtr = static_cast<int*>(genericPointer);
```

## äºŒã€ç±»å‹ä¿®é¥°ç¬¦å’Œé™å®šç¬¦

### 1. const é™å®šç¬¦

```cpp
#include <iostream>
using namespace std;

int main() {
    const int MAX_SIZE = 100;        // å¸¸é‡ï¼Œä¸èƒ½ä¿®æ”¹
    const double PI = 3.14159;       
    
    // æŒ‡é’ˆå’Œconst
    int value = 42;
    const int* ptr1 = &value;        // æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼ˆä¸èƒ½é€šè¿‡ptr1ä¿®æ”¹å€¼ï¼‰
    int* const ptr2 = &value;        // å¸¸é‡æŒ‡é’ˆï¼ˆptr2æœ¬èº«ä¸èƒ½æ”¹å˜ï¼‰
    const int* const ptr3 = &value;  // æŒ‡å‘å¸¸é‡çš„å¸¸é‡æŒ‡é’ˆ
    
    // constæˆå‘˜å‡½æ•°
    class MyClass {
        int data;
    public:
        int getData() const {         // constæˆå‘˜å‡½æ•°ï¼Œä¸ä¿®æ”¹å¯¹è±¡çŠ¶æ€
            return data;
        }
    };
    
    return 0;
}
```

### 2. volatile é™å®šç¬¦

```cpp
volatile int hardwareRegister;  // å‘Šè¯‰ç¼–è¯‘å™¨è¯¥å˜é‡å¯èƒ½è¢«å¤–éƒ¨æ”¹å˜
volatile bool flag;             // å¸¸ç”¨äºå¤šçº¿ç¨‹æˆ–ç¡¬ä»¶ç¼–ç¨‹
```

### 3. mutable é™å®šç¬¦

```cpp
class CacheClass {
    mutable int cacheValue;     // å³ä½¿åœ¨constæˆå‘˜å‡½æ•°ä¸­ä¹Ÿå¯ä¿®æ”¹
    mutable bool cacheValid;
public:
    int getValue() const {
        if (!cacheValid) {
            cacheValue = computeValue();  // å¯ä»¥ä¿®æ”¹mutableæˆå‘˜
            cacheValid = true;
        }
        return cacheValue;
    }
private:
    int computeValue() const { return 42; }
};
```

## ä¸‰ã€æ´¾ç”Ÿæ•°æ®ç±»å‹

### 1. æ•°ç»„ï¼ˆArraysï¼‰

```cpp
#include <iostream>
#include <array>
using namespace std;

int main() {
    // Cé£æ ¼æ•°ç»„
    int arr1[5] = {1, 2, 3, 4, 5};
    int arr2[] = {1, 2, 3};           // è‡ªåŠ¨æ¨å¯¼å¤§å°
    int arr3[5] = {1, 2};             // éƒ¨åˆ†åˆå§‹åŒ–ï¼Œå…¶ä½™ä¸º0
    
    // å¤šç»´æ•°ç»„
    int matrix[3][4] = {
        {1, 2, 3, 4},
        {5, 6, 7, 8},
        {9, 10, 11, 12}
    };
    
    // åŠ¨æ€æ•°ç»„
    int* dynArr = new int[10];
    delete[] dynArr;
    
    // std::array (C++11)
    array<int, 5> stdArr = {1, 2, 3, 4, 5};
    cout << "Size: " << stdArr.size() << endl;
    
    return 0;
}
```

### 2. æŒ‡é’ˆï¼ˆPointersï¼‰

```cpp
#include <iostream>
#include <memory>
using namespace std;

int main() {
    // åŸºæœ¬æŒ‡é’ˆ
    int x = 42;
    int* ptr = &x;              // æŒ‡å‘intçš„æŒ‡é’ˆ
    int** pptr = &ptr;          // æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆ
    
    // ç©ºæŒ‡é’ˆ
    int* nullPtr = nullptr;     // C++11æ¨èæ–¹å¼
    int* nullPtr2 = NULL;       // Cé£æ ¼
    int* nullPtr3 = 0;          // å¦ä¸€ç§æ–¹å¼
    
    // å‡½æ•°æŒ‡é’ˆ
    int (*funcPtr)(int, int);   // æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ
    
    // æ™ºèƒ½æŒ‡é’ˆ (C++11)
    unique_ptr<int> uptr(new int(42));        // å”¯ä¸€æ‰€æœ‰æƒ
    shared_ptr<int> sptr = make_shared<int>(42); // å…±äº«æ‰€æœ‰æƒ
    weak_ptr<int> wptr = sptr;                // å¼±å¼•ç”¨
    
    return 0;
}
```

### 3. å¼•ç”¨ï¼ˆReferencesï¼‰

```cpp
#include <iostream>
using namespace std;

int main() {
    int x = 42;
    int& ref = x;               // å·¦å€¼å¼•ç”¨
    const int& cref = x;        // å¸¸é‡å¼•ç”¨
    
    // å³å€¼å¼•ç”¨ (C++11)
    int&& rref = 42;            // å¯ä»¥ç»‘å®šåˆ°ä¸´æ—¶å¯¹è±¡
    int&& rref2 = move(x);      // ä½¿ç”¨moveè½¬æ¢ä¸ºå³å€¼
    
    // å¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°
    auto swap = [](int& a, int& b) {
        int temp = a;
        a = b;
        b = temp;
    };
    
    return 0;
}
```

## å››ã€ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹

### 1. ç»“æ„ä½“ï¼ˆStructuresï¼‰

```cpp
#include <iostream>
using namespace std;

// åŸºæœ¬ç»“æ„ä½“
struct Point {
    double x;
    double y;
    
    // C++ä¸­ç»“æ„ä½“å¯ä»¥æœ‰æˆå‘˜å‡½æ•°
    double distance() {
        return sqrt(x*x + y*y);
    }
};

// å¸¦æ„é€ å‡½æ•°çš„ç»“æ„ä½“
struct Rectangle {
    int width;
    int height;
    
    Rectangle(int w, int h) : width(w), height(h) {}
    
    int area() const {
        return width * height;
    }
};

int main() {
    Point p1 = {3.0, 4.0};
    Point p2{1.0, 2.0};        // C++11ç»Ÿä¸€åˆå§‹åŒ–
    
    Rectangle rect(10, 20);
    cout << "Area: " << rect.area() << endl;
    
    return 0;
}
```

### 2. è”åˆä½“ï¼ˆUnionsï¼‰

```cpp
#include <iostream>
using namespace std;

union Data {
    int i;
    float f;
    char str[20];
};

// C++11 å¸¦æ ‡ç­¾çš„è”åˆä½“
struct TaggedUnion {
    enum Type { INT, FLOAT, STRING } type;
    union {
        int i;
        float f;
        char str[20];
    };
};

int main() {
    Data data;
    data.i = 10;
    cout << data.i << endl;
    
    data.f = 3.14;  // è¦†ç›–ä¹‹å‰çš„å€¼
    cout << data.f << endl;
    
    return 0;
}
```

### 3. æšä¸¾ï¼ˆEnumerationsï¼‰

```cpp
#include <iostream>
using namespace std;

// Cé£æ ¼æšä¸¾
enum Color {
    RED,      // 0
    GREEN,    // 1
    BLUE      // 2
};

// æŒ‡å®šå€¼çš„æšä¸¾
enum Status {
    SUCCESS = 0,
    ERROR = -1,
    PENDING = 100
};

// å¼ºç±»å‹æšä¸¾ (C++11)
enum class Direction : char {
    North = 'N',
    South = 'S',
    East = 'E',
    West = 'W'
};

int main() {
    Color c = RED;
    Status s = SUCCESS;
    Direction d = Direction::North;
    
    // å¼ºç±»å‹æšä¸¾éœ€è¦æ˜¾å¼è½¬æ¢
    char dirChar = static_cast<char>(d);
    
    return 0;
}
```

### 4. ç±»ï¼ˆClassesï¼‰

```cpp
#include <iostream>
using namespace std;

class Person {
private:
    string name;
    int age;
    
public:
    // æ„é€ å‡½æ•°
    Person(const string& n, int a) : name(n), age(a) {}
    
    // æˆå‘˜å‡½æ•°
    void display() const {
        cout << "Name: " << name << ", Age: " << age << endl;
    }
    
    // ææ„å‡½æ•°
    ~Person() {
        cout << "Person destroyed" << endl;
    }
};
```

## äº”ã€C++11åŠä¹‹åçš„æ–°ç±»å‹

### 1. auto ç±»å‹æ¨å¯¼

```cpp
#include <iostream>
#include <vector>
using namespace std;

int main() {
    auto i = 42;                        // int
    auto d = 3.14;                      // double
    auto s = "hello"s;                  // string (C++14)
    
    vector<int> vec = {1, 2, 3};
    auto it = vec.begin();              // vector<int>::iterator
    
    // å‡½æ•°è¿”å›ç±»å‹æ¨å¯¼ (C++14)
    auto lambda = [](auto x, auto y) {
        return x + y;
    };
    
    return 0;
}
```

### 2. decltype ç±»å‹æ¨å¯¼

```cpp
int x = 5;
decltype(x) y = 10;           // yæ˜¯intç±»å‹
decltype((x)) z = x;          // zæ˜¯int&ç±»å‹

// ç»“åˆautoä½¿ç”¨
template<typename T, typename U>
auto add(T t, U u) -> decltype(t + u) {
    return t + u;
}
```

### 3. nullptr ç±»å‹

```cpp
#include <iostream>
using namespace std;

void func(int) { cout << "int version" << endl; }
void func(void*) { cout << "pointer version" << endl; }

int main() {
    func(0);        // è°ƒç”¨intç‰ˆæœ¬
    func(NULL);     // å¯èƒ½æœ‰æ­§ä¹‰
    func(nullptr);  // æ˜ç¡®è°ƒç”¨pointerç‰ˆæœ¬
    
    return 0;
}
```

## å…­ã€STLå®¹å™¨ç±»å‹

### 1. åºåˆ—å®¹å™¨

```cpp
#include <iostream>
#include <vector>
#include <deque>
#include <list>
#include <array>
#include <forward_list>
using namespace std;

int main() {
    // åŠ¨æ€æ•°ç»„
    vector<int> vec = {1, 2, 3, 4, 5};
    
    // åŒç«¯é˜Ÿåˆ—
    deque<int> deq = {1, 2, 3};
    
    // åŒå‘é“¾è¡¨
    list<int> lst = {1, 2, 3};
    
    // å›ºå®šå¤§å°æ•°ç»„ (C++11)
    array<int, 5> arr = {1, 2, 3, 4, 5};
    
    // å•å‘é“¾è¡¨ (C++11)
    forward_list<int> flst = {1, 2, 3};
    
    return 0;
}
```

### 2. å…³è”å®¹å™¨

```cpp
#include <iostream>
#include <set>
#include <map>
#include <unordered_set>
#include <unordered_map>
using namespace std;

int main() {
    // æœ‰åºé›†åˆ
    set<int> s = {3, 1, 4, 1, 5};
    multiset<int> ms = {1, 1, 2, 2, 3};
    
    // æœ‰åºæ˜ å°„
    map<string, int> m = {{"one", 1}, {"two", 2}};
    multimap<string, int> mm;
    
    // æ— åºé›†åˆ (C++11)
    unordered_set<int> us = {1, 2, 3};
    unordered_multiset<int> ums;
    
    // æ— åºæ˜ å°„ (C++11)
    unordered_map<string, int> um = {{"a", 1}};
    unordered_multimap<string, int> umm;
    
    return 0;
}
```

## ä¸ƒã€ç‰¹æ®Šæ•°æ®ç±»å‹

### 1. std::optional (C++17)

```cpp
#include <iostream>
#include <optional>
using namespace std;

optional<int> divide(int a, int b) {
    if (b == 0) return nullopt;
    return a / b;
}

int main() {
    auto result = divide(10, 2);
    if (result.has_value()) {
        cout << "Result: " << result.value() << endl;
    }
    
    // æˆ–ä½¿ç”¨value_oræä¾›é»˜è®¤å€¼
    cout << divide(10, 0).value_or(-1) << endl;
    
    return 0;
}
```

### 2. std::variant (C++17)

```cpp
#include <iostream>
#include <variant>
#include <string>
using namespace std;

int main() {
    variant<int, float, string> v;
    v = 42;
    cout << get<int>(v) << endl;
    
    v = 3.14f;
    cout << get<float>(v) << endl;
    
    v = "hello"s;
    cout << get<string>(v) << endl;
    
    // è®¿é—®å™¨æ¨¡å¼
    visit([](auto&& arg) {
        cout << arg << endl;
    }, v);
    
    return 0;
}
```

### 3. std::any (C++17)

```cpp
#include <iostream>
#include <any>
using namespace std;

int main() {
    any a = 42;
    cout << any_cast<int>(a) << endl;
    
    a = 3.14;
    cout << any_cast<double>(a) << endl;
    
    a = "hello"s;
    cout << any_cast<string>(a) << endl;
    
    // ç±»å‹æ£€æŸ¥
    if (a.type() == typeid(string)) {
        cout << "a contains a string" << endl;
    }
    
    return 0;
}
```

### 4. std::tuple

```cpp
#include <iostream>
#include <tuple>
using namespace std;

int main() {
    // åˆ›å»ºå…ƒç»„
    tuple<int, string, double> t(42, "hello", 3.14);
    
    // è®¿é—®å…ƒç´ 
    cout << get<0>(t) << endl;  // 42
    cout << get<1>(t) << endl;  // hello
    cout << get<2>(t) << endl;  // 3.14
    
    // ç»“æ„åŒ–ç»‘å®š (C++17)
    auto [id, name, score] = t;
    cout << id << " " << name << " " << score << endl;
    
    // make_tuple
    auto t2 = make_tuple(1, 2.0, "three");
    
    return 0;
}
```

## å…«ã€ç±»å‹è½¬æ¢

### 1. éšå¼ç±»å‹è½¬æ¢

```cpp
int i = 42;
double d = i;        // intåˆ°doubleçš„éšå¼è½¬æ¢
char c = 'A';
int ascii = c;       // charåˆ°intçš„éšå¼è½¬æ¢
```

### 2. æ˜¾å¼ç±»å‹è½¬æ¢ï¼ˆC++é£æ ¼ï¼‰

```cpp
#include <iostream>
using namespace std;

class Base { virtual void dummy() {} };
class Derived : public Base {};

int main() {
    // static_cast - ç¼–è¯‘æ—¶è½¬æ¢
    double d = 3.14;
    int i = static_cast<int>(d);
    
    // dynamic_cast - è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ï¼ˆç”¨äºå¤šæ€ï¼‰
    Base* base = new Derived();
    Derived* derived = dynamic_cast<Derived*>(base);
    
    // const_cast - ç§»é™¤constå±æ€§
    const int ci = 42;
    int* pi = const_cast<int*>(&ci);
    
    // reinterpret_cast - é‡æ–°è§£é‡Šä½æ¨¡å¼
    int* ip = new int(42);
    long addr = reinterpret_cast<long>(ip);
    
    return 0;
}
```

## ä¹ã€ç±»å‹åˆ«å

```cpp
// typedefä¼ ç»Ÿæ–¹å¼
typedef unsigned long ulong;
typedef int (*FuncPtr)(int, int);

// usingç°ä»£æ–¹å¼ (C++11)
using ulong = unsigned long;
using FuncPtr = int(*)(int, int);

// æ¨¡æ¿åˆ«å (C++11)
template<typename T>
using Vec = std::vector<T>;

Vec<int> numbers = {1, 2, 3, 4, 5};
```

## åã€ç±»å‹ç‰¹æ€§ï¼ˆType Traitsï¼‰

```cpp
#include <iostream>
#include <type_traits>
using namespace std;

template<typename T>
void checkType() {
    cout << "Is integral: " << is_integral<T>::value << endl;
    cout << "Is floating point: " << is_floating_point<T>::value << endl;
    cout << "Is pointer: " << is_pointer<T>::value << endl;
    cout << "Is class: " << is_class<T>::value << endl;
}

int main() {
    checkType<int>();
    checkType<double>();
    checkType<string>();
    
    // æ¡ä»¶ç±»å‹é€‰æ‹©
    using Type = conditional<true, int, double>::type;  // Typeæ˜¯int
    
    return 0;
}
```

## æ€»ç»“

C++æä¾›äº†ä¸°å¯Œçš„æ•°æ®ç±»å‹ç³»ç»Ÿï¼Œä»åŸºæœ¬ç±»å‹åˆ°å¤æ‚çš„æ¨¡æ¿ç±»å‹ï¼Œæ¯ç§ç±»å‹éƒ½æœ‰å…¶ç‰¹å®šçš„ç”¨é€”ï¼š

1. **åŸºæœ¬ç±»å‹**ï¼šç”¨äºå­˜å‚¨ç®€å•æ•°æ®
2. **æ´¾ç”Ÿç±»å‹**ï¼šé€šè¿‡ç»„åˆåŸºæœ¬ç±»å‹åˆ›å»ºæ›´å¤æ‚çš„æ•°æ®ç»“æ„
3. **ç”¨æˆ·å®šä¹‰ç±»å‹**ï¼šå…è®¸åˆ›å»ºç¬¦åˆç‰¹å®šéœ€æ±‚çš„è‡ªå®šä¹‰ç±»å‹
4. **STLå®¹å™¨**ï¼šæä¾›é«˜æ•ˆçš„æ•°æ®ç®¡ç†æ–¹æ¡ˆ
5. **ç°ä»£C++ç±»å‹**ï¼šæä¾›æ›´å®‰å…¨ã€æ›´çµæ´»çš„ç±»å‹ç³»ç»Ÿ
